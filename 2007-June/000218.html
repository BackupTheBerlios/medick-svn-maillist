<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Medick-svn] r438 - in trunk: docs/medick.api.template	docs/medick.api.template/media scripts
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/medick-svn/2007-June/index.html" >
   <LINK REL="made" HREF="mailto:medick-svn%40lists.berlios.de?Subject=Re%3A%20%5BMedick-svn%5D%20r438%20-%20in%20trunk%3A%20docs/medick.api.template%0A%09docs/medick.api.template/media%20scripts&In-Reply-To=%3C200706171339.l5HDdMg1013140%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000217.html">
   <LINK REL="Next"  HREF="000219.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Medick-svn] r438 - in trunk: docs/medick.api.template	docs/medick.api.template/media scripts</H1>
    <B>aurelian at BerliOS</B> 
    <A HREF="mailto:medick-svn%40lists.berlios.de?Subject=Re%3A%20%5BMedick-svn%5D%20r438%20-%20in%20trunk%3A%20docs/medick.api.template%0A%09docs/medick.api.template/media%20scripts&In-Reply-To=%3C200706171339.l5HDdMg1013140%40sheep.berlios.de%3E"
       TITLE="[Medick-svn] r438 - in trunk: docs/medick.api.template	docs/medick.api.template/media scripts">aurelian at mail.berlios.de
       </A><BR>
    <I>Sun Jun 17 15:39:22 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000217.html">[Medick-svn] r437 - in trunk/docs: . medick.api.template	medick.api.template/media
</A></li>
        <LI>Next message: <A HREF="000219.html">[Medick-svn] r439 - tags
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#218">[ date ]</a>
              <a href="thread.html#218">[ thread ]</a>
              <a href="subject.html#218">[ subject ]</a>
              <a href="author.html#218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: aurelian
Date: 2007-06-17 15:39:22 +0200 (Sun, 17 Jun 2007)
New Revision: 438

Added:
   trunk/scripts/build.sh
Modified:
   trunk/docs/medick.api.template/blank.html
   trunk/docs/medick.api.template/media/stylesheet.css
   trunk/docs/medick.api.template/packages.html
Log:
 -- changes to API layout &amp;&amp; a nice build script

Modified: trunk/docs/medick.api.template/blank.html
===================================================================
--- trunk/docs/medick.api.template/blank.html	2007-06-17 12:36:03 UTC (rev 437)
+++ trunk/docs/medick.api.template/blank.html	2007-06-17 13:39:22 UTC (rev 438)
@@ -3,5 +3,5 @@
   &lt;meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/&gt;
 &lt;/head&gt;&lt;body&gt;&lt;div align=&quot;center&quot;&gt;&lt;h1&gt;Medick API Documentation&lt;/h1&gt;&lt;p&gt;
   This documentation was generated by &lt;a href=&quot;<A HREF="http://www.phpdoc.org">http://www.phpdoc.org</A>&quot; target=&quot;self&quot;&gt;phpDocumentor&lt;/a&gt;&lt;br /&gt; 
-  from &lt;a href=&quot;medick.locknet.ro&quot; target=&quot;_top&quot;&gt;medick&lt;/a&gt; version 0.4 on &lt;em&gt;on Fri, 14 Jun 2007 18:12:46 +0300&lt;/em&gt;&lt;/p&gt;
+  from &lt;a href=&quot;medick.locknet.ro&quot; target=&quot;_top&quot;&gt;medick&lt;/a&gt; version #{version} on &lt;em&gt;on #{date}&lt;/em&gt;&lt;/p&gt;
 &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
\ No newline at end of file

Modified: trunk/docs/medick.api.template/media/stylesheet.css
===================================================================
--- trunk/docs/medick.api.template/media/stylesheet.css	2007-06-17 12:36:03 UTC (rev 437)
+++ trunk/docs/medick.api.template/media/stylesheet.css	2007-06-17 13:39:22 UTC (rev 438)
@@ -9,6 +9,8 @@
 
 a img { border: 0px; }
 
+li { margin:0px; padding:0px; }
+
 /* Page layout/boxes */
 
 .info-box {  }

Modified: trunk/docs/medick.api.template/packages.html
===================================================================
--- trunk/docs/medick.api.template/packages.html	2007-06-17 12:36:03 UTC (rev 437)
+++ trunk/docs/medick.api.template/packages.html	2007-06-17 13:39:22 UTC (rev 438)
@@ -23,24 +23,24 @@
 &lt;a href=&quot;ric_README.html&quot; target=&quot;right&quot;&gt;README&lt;/a&gt; | 
 &lt;a href=&quot;ric_TODO.html&quot; target=&quot;right&quot;&gt;TODO&lt;/a&gt;
     &lt;/td&gt;
-								&lt;td style=&quot;width: 2em&quot;&gt;&nbsp;&lt;/td&gt;
-								&lt;td style=&quot;text-align: right&quot;&gt;
-																			&lt;span class=&quot;field&quot;&gt;Packages&lt;/span&gt; 
-										&lt;select class=&quot;package-selector&quot; onchange=&quot;window.parent.left_bottom.location=this[selectedIndex].value&quot;&gt;
-																					&lt;option value=&quot;li_medick.core.html&quot;&gt;medick.core&lt;/option&gt;
-																					&lt;option value=&quot;li_medick.action.controller.html&quot;&gt;medick.action.controller&lt;/option&gt;
-																					&lt;option value=&quot;li_medick.action.view.html&quot;&gt;medick.action.view&lt;/option&gt;
-																					&lt;option value=&quot;li_medick.active.record.html&quot;&gt;medick.active.record&lt;/option&gt;
-																					&lt;option value=&quot;li_medick.active.support.html&quot;&gt;medick.active.support&lt;/option&gt;
-																					&lt;option value=&quot;li_medick.configurator.html&quot;&gt;medick.configurator&lt;/option&gt;
-																					&lt;option value=&quot;li_medick.context.html&quot;&gt;medick.context&lt;/option&gt;
-																					&lt;option value=&quot;li_medick.logger.html&quot;&gt;medick.logger&lt;/option&gt;
-																				&lt;/select&gt;
-																	&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/table&gt;
-					&lt;/form&gt;
-				&lt;/div&gt;
-			&lt;/div&gt;
-		&lt;/body&gt;
+								&lt;td style=&quot;width: 2em&quot;&gt;&nbsp;&lt;/td&gt;
+								&lt;td style=&quot;text-align: right&quot;&gt;
+								&lt;span class=&quot;field&quot;&gt;Packages&lt;/span&gt;
+								&lt;select class=&quot;package-selector&quot; onchange=&quot;window.parent.left_bottom.location=this[selectedIndex].value&quot;&gt;
+								    &lt;option value=&quot;li_medick.core.html&quot;&gt;medick.core&lt;/option&gt;
+								    &lt;option value=&quot;li_medick.action.controller.html&quot;&gt;medick.action.controller&lt;/option&gt;
+								    &lt;option value=&quot;li_medick.action.view.html&quot;&gt;medick.action.view&lt;/option&gt;
+								    &lt;option value=&quot;li_medick.active.record.html&quot;&gt;medick.active.record&lt;/option&gt;
+								    &lt;option value=&quot;li_medick.active.support.html&quot;&gt;medick.active.support&lt;/option&gt;
+								    &lt;option value=&quot;li_medick.configurator.html&quot;&gt;medick.configurator&lt;/option&gt;
+								    &lt;option value=&quot;li_medick.context.html&quot;&gt;medick.context&lt;/option&gt;
+								    &lt;option value=&quot;li_medick.logger.html&quot;&gt;medick.logger&lt;/option&gt;
+								&lt;/select&gt;
+							    &lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/table&gt;
+					&lt;/form&gt;
+				&lt;/div&gt;
+			&lt;/div&gt;
+		&lt;/body&gt;
 	&lt;/html&gt;
\ No newline at end of file

Added: trunk/scripts/build.sh
===================================================================
--- trunk/scripts/build.sh	2007-06-17 12:36:03 UTC (rev 437)
+++ trunk/scripts/build.sh	2007-06-17 13:39:22 UTC (rev 438)
@@ -0,0 +1,111 @@
+#!/bin/bash
+
+#
+# $Id$
+#
+
+# php doc path.
+PHPDOC=&quot;/W/Devel/PhpDocumentor-1.3.0RC4&quot;
+
+# &quot;log&quot; function
+function say {
+	echo &quot;[`date +&quot;%Y-%m-%d %H:%M:%S&quot;`] ===&gt; $1&quot;
+}
+
+# {{{ find what version we are building
+version=`cat VERSION`
+build=&quot;build/medick-$version&quot;
+
+say &quot;Building release of medick-$version&quot;
+# }}}
+
+# {{{ check if the build folder exists or if we have the force option
+if [ -d $build ]; then
+	say &quot;$build exists&quot;
+	if [[ (&quot;$1&quot; == &quot;-f&quot;) || (&quot;$1&quot; == &quot;--force&quot;) ]]; then
+		say &quot;force a re-build&quot;
+		rm -rf $build
+	else
+		say &quot;Use -f [--force] to force a re-build.&quot;
+		exit
+	fi
+fi
+# }}}
+
+# {{{ prepare for build
+framework=$build/framework
+applications=$build/applications
+doc=$build/doc
+api=$build/api
+mkdir -p build
+mkdir -p $build
+rm -rf $doc
+rm -rf $api
+mkdir -p $doc
+mkdir -p $api
+# }}}
+
+# {{{ svn export 
+say &quot;Exporting applications to $applications&quot;
+svn export -q <A HREF="svn://svn.berlios.de/medick/applications">svn://svn.berlios.de/medick/applications</A> $applications
+
+say &quot;Exporting trunk to $framework&quot;
+svn export -q <A HREF="svn://svn.berlios.de/medick/trunk">svn://svn.berlios.de/medick/trunk</A> $framework
+# }}}}
+
+# {{{ build the API docs 
+doc_entries=( $framework/libs/action/ \
+						  $framework/libs/active/ \
+						  $framework/libs/context/ \
+						  $framework/libs/configurator/ \
+						  $framework/libs/logger/ \
+						  $framework/libs/medick/ \
+							$framework/README \
+							$framework/TODO \
+							$framework/LICENSE \
+							$framework/CHANGELOG \
+							$framework/VERSION )
+							
+say &quot;Preparing API docs.&quot;							
+for entry in ${doc_entries[@]}
+do
+	if echo &quot;$entry&quot; | grep -q libs
+	then
+		p=`echo $entry | sed -e &quot;s/framework\/libs/doc/&quot;`
+		cp -r $entry $p
+	else
+		cp $entry $doc
+	fi
+done
+
+say &quot;Running phpdoc...&quot;
+
+php -dinclude_path=$PHPDOC -derror_reporting='E_ALL ^ E_NOTICE' $PHPDOC/pear-phpdoc --pear off -q -d $doc/ -t $api -ti &quot;Medick API Documentation&quot; -dn &quot;medick.core&quot; -s on -o &quot;HTML:frames:earthli&quot;
+
+# copy our templates
+# cp docs/medick.api.template/blank.html $api/.
+
+say &quot;Apply medick templates on API docs.&quot;
+sed -e &quot;s/#{date}/`date`/&quot; -e &quot;s/#{version}/$version/&quot; docs/medick.api.template/blank.html &gt; $api/blank.html
+cp docs/medick.api.template/packages.html $api/.
+cp docs/medick.api.template/media/stylesheet.css $api/media/.
+
+# cleanup
+say &quot;Clean up.&quot;
+rm -rf $doc $framework/docs $framework/scripts $framework/test/
+mv $api $framework/docs
+
+# }}}
+
+# {{{ pack.
+say &quot;Packing files...&quot;
+cd build
+tar -czf medick-$version.tgz medick-$version
+zip -9 -q -r medick-$version.zip medick-$version
+cd ../
+
+say &quot;Created tgz file to build/medick-$version.tgz&quot;
+say &quot;Created zip file to build/medick-$version.zip&quot;
+# }}}
+
+say &quot;All Done.&quot;


Property changes on: trunk/scripts/build.sh
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:keywords
   + Id


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000217.html">[Medick-svn] r437 - in trunk/docs: . medick.api.template	medick.api.template/media
</A></li>
	<LI>Next message: <A HREF="000219.html">[Medick-svn] r439 - tags
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#218">[ date ]</a>
              <a href="thread.html#218">[ thread ]</a>
              <a href="subject.html#218">[ subject ]</a>
              <a href="author.html#218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/medick-svn">More information about the Medick-svn
mailing list</a><br>
</body></html>
